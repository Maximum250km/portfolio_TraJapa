
<div class="uk-container  uk-margin-medium">
	<div class="uk-grid">
		<div class="uk-width-1-3">
			<%= render 'users/profile', user: @user %>
			<%= form_for(@post_new) do |f| %>
		</div>
		<% if @post_new.errors.any? %>
		<h3><%= @post_new.errors.count %>error occurrence</h3><!--エラーメッセ-->
		<ul>
			<% @post_new.errors.full_messages.each do |message| %>
			<li><%= message %></li>
			<% end %>
		</ul>
		<% end %>


	<div class="uk-width-2-3 uk-width-auto uk-margin-medium">
		<fieldset class="uk-fieldset ">
			<legend class="uk-legend uk-text-center uk-text-primary">Puslish Your Trip and Share It</legend>
			<div class="field">
				<%= f.label :title, class: "uk-label" %>
				<%= f.text_field :title, class: "uk-input" %>
			</div>
			<div class="field">
				<%= f.label :opinion, class: "uk-label" %>
				<%= f.text_area :body, class: "uk-textarea" %>
			</div>
			<div class="field">
				<%= f.label :topic, class: "uk-label" %>
				<%= f.select :post_genre, [["Travel"],["Tips"],["Spot"]] %>
			</div>
			<div class="field">
				<%= f.label :image, class: "uk-label" %>
				<%= f.attachment_field :post_image, class: "uk-button uk-button-default" %>
			</div>
			<div class="field form-group">
				<%= f.label :spot, class: "uk-label" %>
				<%= f.text_field :spot, class:"form-control", id:"search_input", placeholder:"where to visit" %>
				<input type="hidden" id="latitude_input"/>
				<input type="hidden" id="longitude_input"/>
			</div>
			<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBgcXDu9pZmm_jOHHvAgpwnyVhIw9uiqfw&libraries=places"></script>
			<script>
				var searchInput = 'search_input';
				$(document).ready(function () {
					var autocomplete;
					autocomplete = new google.maps.places.Autocomplete((document.getElementById(searchInput)), {
						types: ['geocode'],
						componentRestrictions: {country: "jp"}
					});
					google.maps.event.addListener(autocomplete, 'place_changed', function () {
						var near_place = autocomplete.getPlace();
						document.getElementById('loc_lat').value = near_place.geometry.location.lat();
						document.getElementById('loc_long').value = near_place.geometry.location.lng();
						document.getElementById('latitude_view').innerHTML = near_place.geometry.location.lat();
						document.getElementById('longitude_view').innerHTML = near_place.geometry.location.lng();
					});
				});
			</script>
			<div class="">
				<%= f.submit class: "btn btn-primary" %>
			</div>
		</fieldset>
	</div>
	</div>
	<% end %>
